(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';
$.extend(true, window, { Slick: { Plugins: { ColGroup: ColGroup } } });
function ColGroup() {
    var _uid = void 0, _handler = new Slick.EventHandler(), _cache = {};
    function init(grid) {
        _uid = grid.getContainerNode().className.match(/(?: |^)slickgrid_(\d+)(?!\w)/)[1];
        _handler.subscribe(grid.onColumnsResized, handleColumnsResized);
        var cache = _cache[_uid] = {};
        cache.grid = grid;
        cache.headerScrollerEl = grid.getContainerNode().querySelector('.slick-header');
        cache.origHeadersEl = cache.headerScrollerEl.querySelector('.slick-header-columns');
        var originalColumnDef = grid.getColumns(), v = measureVCellPaddingAndBorder();
        cache.origHeadersEl.style.height = v.height + v.heightDiff + 'px';
        cache.origHeadersEl.style.overflow = 'visible';
        grid.setColumns = function (originalSetColumns) {
            return function (columnsDef) {
                _uid = this.getContainerNode().className.match(/(?: |^)slickgrid_(\d+)(?!\w)/)[1];
                var cache = _cache[_uid];
                cache.columnsDef = columnsDef;
                cache.innerColumnsDef = genInnerColumnsDef(columnsDef);
                cache.columnsDefByLevel = genColumnsDefByLevel(grid.getColumns());
                originalSetColumns(cache.innerColumnsDef);
                createColumnGroupHeaderRow();
                createColumnGroupHeaders();
                applyColumnGroupWidths();
            };
        }(grid.setColumns);
        grid.getColumns = function () {
            return _cache[_uid].columnsDef;
        };
        grid.destroy = function (originalDestroy) {
            return function () {
                _uid = this.getContainerNode().className.match(/(?: |^)slickgrid_(\d+)(?!\w)/)[1];
                var styleEl = _cache[_uid].styleEl;
                styleEl.parentNode.removeChild(styleEl);
                originalDestroy();
            };
        }(grid.destroy);
        [
            'invalidate',
            'render'
        ].forEach(function (fnName) {
            grid[fnName] = function (origFn) {
                return function () {
                    origFn(arguments);
                    applyColumnGroupWidths();
                };
            }(grid[fnName]);
        });
        if (grid.getOptions()['explicitInitialization']) {
            grid.init = function (originalInit) {
                return function () {
                    _uid = this.getContainerNode().className.match(/(?: |^)slickgrid_(\d+)(?!\w)/)[1];
                    originalInit();
                    measureHCellPaddingAndBorder = memoizeMeasureHCellPaddingAndBorder();
                    grid.setColumns(originalColumnDef);
                    createCssRules();
                };
            }(grid.init);
        } else {
            measureHCellPaddingAndBorder = memoizeMeasureHCellPaddingAndBorder();
            grid.setColumns(originalColumnDef);
            createCssRules();
        }
    }
    function handleColumnsResized() {
        applyColumnGroupWidths();
    }
    var measureHCellPaddingAndBorder;
    function memoizeMeasureHCellPaddingAndBorder() {
        var headerColumnWidthDiff = void 0;
        return function () {
            if (headerColumnWidthDiff != null)
                return headerColumnWidthDiff;
            var h = [
                    'paddingLeft',
                    'paddingRight',
                    'borderLeftWidth',
                    'borderRightWidth'
                ], $r = $(_cache[_uid].origHeadersEl), $el = $('<div class="ui-state-default slick-header-column" id="" style="visibility:hidden">-</div>').appendTo($r), widthDiff = 0;
            h.forEach(function (val) {
                widthDiff += parseFloat($el.css(val)) || 0;
            });
            $el.remove();
            headerColumnWidthDiff = widthDiff;
            return headerColumnWidthDiff;
        };
    }
    function measureVCellPaddingAndBorder() {
        var v = [
                'borderTopWidth',
                'borderBottomWidth',
                'paddingTop',
                'paddingBottom'
            ], $canvas = $(_cache[_uid].grid.getCanvasNode()), $r = $('<div class="slick-row" />').appendTo($canvas), $el = $('<div class="slick-cell" id="" style="visibility:hidden">-</div>').appendTo($r), height = void 0, heightDiff = 0;
        height = parseFloat($el.css('height'));
        v.forEach(function (val) {
            heightDiff += parseFloat($el.css(val)) || 0;
        });
        $r.remove();
        return {
            height: height,
            heightDiff: heightDiff
        };
    }
    function applyColumnGroupWidths() {
        var cache = _cache[_uid], origHeadersWidth = getHeadersWidth(), groupHeadersEl = cache.groupHeadersEl, maxLevel = groupHeadersEl.length;
        for (var r = 0; r < maxLevel; r++) {
            groupHeadersEl[r].style.width = origHeadersWidth;
        }
        var hPadding = measureHCellPaddingAndBorder();
        setWidthRecursively(cache.columnsDef);
        function setWidthRecursively(columnsDef) {
            var level = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];
            var offsetsByLevel = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];
            for (var c = 0, C = columnsDef.length; c < C; c++) {
                var column = columnsDef[c], columnSelector = '#slickgrid_' + (_uid + String(column.id).replace(/(#|,|\.)/g, '\\$1')), columnEl = cache.headerScrollerEl.querySelector(columnSelector);
                if (hasChildren(column)) {
                    setWidthRecursively(column.children, level + 1, offsetsByLevel);
                    var width = 0;
                    for (var c2 = 0, C2 = column.children.length; c2 < C2; c2++) {
                        var _columnSelector = '#slickgrid_' + (_uid + String(column.children[c2].id).replace(/(#|,|\.)/g, '\\$1')), _columnEl = cache.headerScrollerEl.querySelector(_columnSelector);
                        width += _columnEl.offsetWidth;
                    }
                    columnEl.style.width = width - hPadding + 'px';
                    columnEl.style.marginLeft = (offsetsByLevel[level] || 0) + 'px';
                    offsetsByLevel[level] = 0;
                } else {
                    for (var l = level; l < maxLevel; l++) {
                        offsetsByLevel[l] = (offsetsByLevel[l] || 0) + columnEl.offsetWidth;
                    }
                }
            }
        }
    }
    function getHeadersWidth() {
        return _cache[_uid].origHeadersEl.style.width;
    }
    function createColumnGroupHeaderRow() {
        var cache = _cache[_uid], headerScrollerEl = cache.headerScrollerEl, groupHeadersEl = cache.groupHeadersEl = cache.groupHeadersEl || [], columnsDefByLevel = cache.columnsDefByLevel;
        for (var i = 0, len = groupHeadersEl.length; i < len; i++) {
            headerScrollerEl.removeChild(cache.groupHeadersEl[i]);
        }
        var fragment = document.createDocumentFragment();
        for (var _i = 0, _len = columnsDefByLevel.length; _i < _len - 1; _i++) {
            var tmp = document.createElement('div');
            tmp.innerHTML = '<div class="slick-header-columns slick-header-columns-groups" style="left: -1000px" unselectable="on"></div>';
            groupHeadersEl[_i] = tmp.childNodes[0];
            fragment.appendChild(groupHeadersEl[_i]);
        }
        headerScrollerEl.insertBefore(fragment, cache.headerScrollerEl.firstChild);
    }
    function createColumnGroupHeaders() {
        var cache = _cache[_uid], columnsDefByLevel = cache.columnsDefByLevel;
        for (var r = 0, R = cache.groupHeadersEl.length; r < R; r++) {
            var toCreateColumnsDef = columnsDefByLevel[r], columnsGroupHtml = '';
            for (var c = 0, C = toCreateColumnsDef.length; c < C; c++) {
                var column = toCreateColumnsDef[c];
                if (hasChildren(column)) {
                    columnsGroupHtml += '\n<div class="ui-state-default slick-header-column slick-header-columns-group ' + (column.headerCssClass || '') + '"\n  id="slickgrid_' + (_uid + column.id) + '"\n  title="' + (column.toolTip || '') + '">\n  <span class="slick-column-name">' + (hasChildren(column) ? column.name || '' : '') + '</span>\n</div>';
                } else {
                    var tipColumn = cache.origHeadersEl.querySelector('#slickgrid_' + (_uid + String(column.id).replace(/(#|,|\.)/g, '\\$1')));
                    tipColumn.className += ' h' + (columnsDefByLevel.length - r);
                }
            }
            cache.groupHeadersEl[r].innerHTML = columnsGroupHtml;
        }
        cache.grid.resizeCanvas();
    }
    function createCssRules() {
        var cache = _cache[_uid], v = measureVCellPaddingAndBorder(), rules = ['.hidden {visibility: hidden;}'], maxLevel = cache.columnsDefByLevel.length;
        for (var i = 1; i <= maxLevel; i++) {
            rules.push('\n.slick-header-column.h' + i + ' {\n  margin: ' + (1 - i) * (v.height + v.heightDiff) + 'px 0 0 0;\n  font-size: inherit;\n  height: ' + (i * (v.height + v.heightDiff) - v.heightDiff * 2 + 1) + 'px;\n}');
        }
        var styleEl = cache.styleEl = $('<style type="text/css" rel="stylesheet" />').appendTo($('head'))[0];
        if (styleEl.styleSheet) {
            styleEl.styleSheet.cssText = rules.join(' ');
        } else {
            styleEl.appendChild(document.createTextNode(rules.join(' ')));
        }
    }
    function genColumnsDefByLevel(columns) {
        var depth = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];
        var acc = arguments.length <= 2 || arguments[2] === undefined ? [] : arguments[2];
        for (var i = 0, len = columns.length; i < len; i++) {
            var column = columns[i];
            acc[depth] = acc[depth] || [];
            acc[depth].push(column);
            if (hasChildren(column)) {
                genColumnsDefByLevel(column.children, depth + 1, acc);
            }
        }
        return acc;
    }
    function genInnerColumnsDef(columns) {
        var acc = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];
        var first = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];
        for (var i = 0, len = columns.length; i < len; i++) {
            var column = columns[i];
            if (!hasChildren(column)) {
                acc.push(column);
            } else {
                genInnerColumnsDef(column.children, acc, false);
            }
        }
        return acc;
    }
    function hasChildren(column) {
        return column.children && column.children.length > 0 && Object.prototype.toString.apply(column.children) === '[object Array]' || false;
    }
    $.extend(this, { init: init });
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2xpY2suY29sZ3JvdXAuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDVUEsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxJQUFULEVBQWUsTUFBZixFQUF1QixFQUNyQixLQUFBLEVBQU8sRUFDTCxPQUFBLEVBQVMsRUFDUCxRQUFBLEVBQUEsUUFETyxFQURKLEVBRGMsRUFBdkI7QUFpQ0EsU0FBUyxRQUFULEdBQW9CO0FBQUEsSUFBQSxJQWNkLElBQUEsR0FBQSxLQUFBLENBZGMsRUFpQmQsUUFBQSxHQUFXLElBQUksS0FBQSxDQUFNLFlBQVYsRUFqQkcsRUFvQmQsTUFBQSxHQUFTLEVBcEJLLENBQUE7QUFBQSxJQXNCbEIsU0FBUyxJQUFULENBQWMsSUFBZCxFQUFvQjtBQUFBLFFBR2xCLElBQUEsR0FBTyxJQUFBLENBQUssZ0JBQUwsR0FBd0IsU0FBeEIsQ0FBa0MsS0FBbEMsQ0FBd0MsOEJBQXhDLEVBQXdFLENBQXhFLENBQVAsQ0FIa0I7QUFBQSxRQUlsQixRQUFBLENBQ0csU0FESCxDQUNhLElBQUEsQ0FBSyxnQkFEbEIsRUFDb0Msb0JBRHBDLEVBSmtCO0FBQUEsUUFBQSxJQVdkLEtBQUEsR0FBUSxNQUFBLENBQU8sSUFBUCxJQUFlLEVBWFQsQ0FBQTtBQUFBLFFBWWxCLEtBQUEsQ0FBTSxJQUFOLEdBQWEsSUFBYixDQVprQjtBQUFBLFFBYWxCLEtBQUEsQ0FBTSxnQkFBTixHQUF5QixJQUFBLENBQUssZ0JBQUwsR0FBd0IsYUFBeEIsQ0FBc0MsZUFBdEMsQ0FBekIsQ0Fia0I7QUFBQSxRQWNsQixLQUFBLENBQU0sYUFBTixHQUFzQixLQUFBLENBQU0sZ0JBQU4sQ0FBdUIsYUFBdkIsQ0FBcUMsdUJBQXJDLENBQXRCLENBZGtCO0FBQUEsUUFnQmxCLElBQUksaUJBQUEsR0FBb0IsSUFBQSxDQUFLLFVBQUwsRUFBeEIs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QUFBQSxRQUczRCxLQUFLLElBQUksQ0FBQSxHQUFJLENBQVIsRUFBVyxHQUFBLEdBQU0sT0FBQSxDQUFRLE1BQXpCLENBQUwsQ0FBc0MsQ0FBQSxHQUFJLEdBQTFDLEVBQStDLENBQUEsRUFBL0MsRUFBb0Q7QUFBQSxZQUNsRCxJQUFJLE1BQUEsR0FBUyxPQUFBLENBQVEsQ0FBUixDQUFiLENBRGtEO0FBQUEsWUFFbEQsSUFBSSxDQUFDLFdBQUEsQ0FBWSxNQUFaLENBQUwsRUFBMEI7QUFBQSxnQkFDeEIsR0FBQSxDQUFJLElBQUosQ0FBUyxNQUFULEVBRHdCO0FBQUEsYUFBMUIsTUFFTztBQUFBLGdCQUNMLGtCQUFBLENBQW1CLE1BQUEsQ0FBTyxRQUExQixFQUFvQyxHQUFwQyxFQUF5QyxLQUF6QyxFQURLO0FBQUEsYUFKMkM7QUFBQSxTQUhPO0FBQUEsUUFXM0QsT0FBTyxHQUFQLENBWDJEO0FBQUEsS0FwVzNDO0FBQUEsSUFBQSxTQXVYVCxXQXZYUyxDQXVYRyxNQXZYSCxFQXVYVztBQUFBLFFBQzNCLE9BQU8sTUFBQSxDQUFPLFFBQVAsSUFDTCxNQUFBLENBQU8sUUFBUCxDQUFnQixNQUFoQixHQUF5QixDQURwQixJQUVMLE1BQUEsQ0FBTyxTQUFQLENBQWlCLFFBQWpCLENBQTBCLEtBQTFCLENBQWdDLE1BQUEsQ0FBTyxRQUF2QyxNQUFxRCxnQkFGaEQsSUFHTCxLQUhGLENBRDJCO0FBQUEsS0F2WFg7QUFBQSxJQThYbEIsQ0FBQSxDQUFFLE1BQUYsQ0FBUyxJQUFULEVBQWUsRUFDYixJQUFBLEVBQUEsSUFEYSxFQUFmLEVBOVhrQjtBQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2tlaWsvc2xpY2tncmlkLWNvbGdyb3VwLXBsdWdpblxuICogQHZlcnNpb24gJFZFUlNJT05cbiAqIEBhdXRob3Iga2VpayA8azR0MC5rZWlAZ21haWwuY29tPlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxubGV0IGQgPSByZXF1aXJlKCdkZWJ1ZycpKCdzbGlja2dyaWQtY29sZ3JvdXAtcGx1Z2luJyk7XG5cbi8vIHJlZ2lzdGVyIG5hbWVzcGFjZVxuJC5leHRlbmQodHJ1ZSwgd2luZG93LCB7XG4gIFNsaWNrOiB7XG4gICAgUGx1Z2luczoge1xuICAgICAgQ29sR3JvdXBcbiAgICB9XG4gIH1cbn0pO1xuXG4vKipcbiAqIEEgcGx1Z2luIHRvIGNyZWF0ZSBjb2x1bW4gZ3JvdXAgaW4gYSBoZWFkZXIuXG4gKlxuICogVVNBR0U6XG4gKlxuICogVG8gc3BlY2lmeSBhIGNvbG11biBncm91cCwgZXh0ZW5kIHRoZSBjb2x1bW4gZGVmaW5pdGlvbiB0byBhZGQgYGNoaWxkcmVuYFxuICogcHJvcGVydHkgd2l0aCBhcnJheSB2YWx1ZSwgbGlrZSBzbzpcbiAqXG4gKiAgIHZhciBjb2x1bW5zID0gW1xuICogICAgIHtpZDogJ2NvbDEnLCBuYW1lOiAnY29sIDEnLCBjaGlsZHJlbjogW1xuICogICAgICAge2lkOiAnY29sMS0xJywgbmFtZTogJ2NvbCAxLTEnLCBmaWVsZDogJ2NvbDEtMSd9LFxuICogICAgICAge2lkOiAnY29sMS0yJywgbmFtZTogJ2NvbCAxLTInLCBmaWVsZDogJ2NvbDEtMid9XG4gKiAgICAgXX0sXG4gKiAgICAge2lkOiAnY29sMicsIG5hbWU6ICdjb2wgMicsIGNoaWxkcmVuOiBbXG4gKiAgICAgICB7aWQ6ICdjb2wyLTEnLCBuYW1lOiAnY29sIDItMScsIGZpZWxkOiAnY29sMi0xJ30sXG4gKiAgICAgICB7aWQ6ICdjb2wyLTInLCBuYW1lOiAnY29sIDItMicsIGNoaWxkcmVuOiBbXG4gKiAgICAgICAgIHtpZDogJ2NvbDItMi0xJywgbmFtZTogJ2NvbCAyLTItMScsIGZpZWxkOiAnY29sMi0yLTEnfSxcbiAqICAgICAgICAge2lkOiAnY29sMi0yLTInLCBuYW1lOiAnY29sIDItMi0yJywgZmllbGQ6ICdjb2wyLTItMid9XG4gKiAgICAgICBdfVxuICogICAgIF19XG4gKiAgIF07XG4gKlxuICogQGNsYXNzIFNsaWNrLlBsdWdpbnMuQ29sR3JvdXBcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBDb2xHcm91cCgpIHtcbiAgZCgnQ29uc3RydWN0b3InKTtcblxuICAvKlxuICAgKiBET00gZWxlbWVudHMgc3RydWN0dXJlOlxuICAgKlxuICAgKiBgaGVhZGVyU2Nyb2xsZXJgICAoc2VsZWN0b3I6IC5zbGljay1oZWFkZXIpXG4gICAqICAgYGdyb3VwSGVhZGVyc0VsYCAoc2VsZWN0b3I6IC5zbGljay1oZWFkZXItY29sdW1ucy5zbGljay1oZWFkZXItY29sdW1ucy1ncm91cHMpXG4gICAqICAgICAgW2NvbHVtbi4uLl0gIChzZWxlY3RvcjogLnNsaWNrLWhlYWRlci1jb2x1bW4uc2xpY2staGVhZGVyLWNvbHVtbnMtZ3JvdXApXG4gICAqICAgYG9yaWdIZWFkZXJzRWxgIChzZWxlY3RvcjogLnNsaWNrLWhlYWRlci1jb2x1bW5zKVxuICAgKiAgICAgIFtjb2x1bW4uLi5dICAoc2VsZWN0b3I6IC5zbGljay1oZWFkZXItY29sdW1uKVxuICAgKi9cblxuICAvKiogVUlEIG9mIGEgY3VycmVudCB0YXJnZXQgZ3JpZC4gdGhpcyB3b3VsZCBiZSBzaWRlLWVmZmVjdGVkICovXG4gIGxldCBfdWlkLCAvLyBsaWtlICNzbGlja2dyaWRfMTExMTExMVxuXG4gICAgICAvKiogRXZlbnQgaGFuZGxlciAqL1xuICAgICAgX2hhbmRsZXIgPSBuZXcgU2xpY2suRXZlbnRIYW5kbGVyKCksXG5cbiAgICAgIC8qKiBDYWNoZSBmb3IgYSBncmlkIG9iamVjdCBhbmQgRE9NIGVsZW1lbnRzIGFzc29jaWF0ZWQgd2l0aCBVSUQgKi9cbiAgICAgIF9jYWNoZSA9IHt9O1xuXG4gIGZ1bmN0aW9uIGluaXQoZ3JpZCkge1xuICAgIGQoJ2luaXQnKTtcblxuICAgIF91aWQgPSBncmlkLmdldENvbnRhaW5lck5vZGUoKS5jbGFzc05hbWUubWF0Y2goLyg/OiB8XilzbGlja2dyaWRfKFxcZCspKD8hXFx3KS8pWzFdO1xuICAgIF9oYW5kbGVyXG4gICAgICAuc3Vic2NyaWJlKGdyaWQub25Db2x1bW5zUmVzaXplZCwgaGFuZGxlQ29sdW1uc1Jlc2l6ZWQpO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBjYWNoZSBncmlkIHJlbGF0aXZlc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICBsZXQgY2FjaGUgPSBfY2FjaGVbX3VpZF0gPSB7fTtcbiAgICBjYWNoZS5ncmlkID0gZ3JpZDtcbiAgICBjYWNoZS5oZWFkZXJTY3JvbGxlckVsID0gZ3JpZC5nZXRDb250YWluZXJOb2RlKCkucXVlcnlTZWxlY3RvcignLnNsaWNrLWhlYWRlcicpO1xuICAgIGNhY2hlLm9yaWdIZWFkZXJzRWwgPSBjYWNoZS5oZWFkZXJTY3JvbGxlckVsLnF1ZXJ5U2VsZWN0b3IoJy5zbGljay1oZWFkZXItY29sdW1ucycpO1xuXG4gICAgbGV0IG9yaWdpbmFsQ29sdW1uRGVmID0gZ3JpZC5nZXRDb2x1bW5zKCksXG4gICAgICAgIHYgPSBtZWFzdXJlVkNlbGxQYWRkaW5nQW5kQm9yZGVyKCk7XG4gICAgY2FjaGUub3JpZ0hlYWRlcnNFbC5zdHlsZS5oZWlnaHQgPSB2LmhlaWdodCArIHYuaGVpZ2h0RGlmZiArICdweCc7XG4gICAgY2FjaGUub3JpZ0hlYWRlcnNFbC5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIG92ZXJ3cml0ZSBtZXRob2RzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvLyBhY2Nlc3NvcnNcbiAgICBncmlkLnNldENvbHVtbnMgPSAoZnVuY3Rpb24ob3JpZ2luYWxTZXRDb2x1bW5zKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oY29sdW1uc0RlZikge1xuICAgICAgICBkKCdzZXRDb2x1bW5zJyk7XG5cbiAgICAgICAgLy8gdXBkYXRlIGN1cnJlbnQgdGFyZ2V0IGdyaWQgVUlEXG4gICAgICAgIF91aWQgPSB0aGlzLmdldENvbnRhaW5lck5vZGUoKS5jbGFzc05hbWUubWF0Y2goLyg/OiB8XilzbGlja2dyaWRfKFxcZCspKD8hXFx3KS8pWzFdO1xuXG4gICAgICAgIC8vIC0gIGNvbHVtbnMgZGVmaW5hdGlvbnNcbiAgICAgICAgbGV0IGNhY2hlID0gX2NhY2hlW191aWRdO1xuICAgICAgICBjYWNoZS5jb2x1bW5zRGVmID0gY29sdW1uc0RlZjtcbiAgICAgICAgY2FjaGUuaW5uZXJDb2x1bW5zRGVmID0gZ2VuSW5uZXJDb2x1bW5zRGVmKGNvbHVtbnNEZWYpO1xuICAgICAgICBjYWNoZS5jb2x1bW5zRGVmQnlMZXZlbCA9IGdlbkNvbHVtbnNEZWZCeUxldmVsKGdyaWQuZ2V0Q29sdW1ucygpKTtcbiAgICAgICAgb3JpZ2luYWxTZXRDb2x1bW5zKGNhY2hlLmlubmVyQ29sdW1uc0RlZik7XG4gICAgICAgIGNyZWF0ZUNvbHVtbkdyb3VwSGVhZGVyUm93KCk7XG4gICAgICAgIGNyZWF0ZUNvbHVtbkdyb3VwSGVhZGVycygpO1xuICAgICAgICBhcHBseUNvbHVtbkdyb3VwV2lkdGhzKCk7XG4gICAgICB9O1xuICAgIH0oZ3JpZC5zZXRDb2x1bW5zKSk7XG5cbiAgICBncmlkLmdldENvbHVtbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGQoJ2dldENvbHVtbnMnKTtcblxuICAgICAgcmV0dXJuIF9jYWNoZVtfdWlkXS5jb2x1bW5zRGVmO1xuICAgIH07XG5cbiAgICBncmlkLmRlc3Ryb3kgPSAoZnVuY3Rpb24ob3JpZ2luYWxEZXN0cm95KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIGQoJ2Rlc3Ryb3knKTtcbiAgICAgICAgLy8gdXBkYXRlIGN1cnJlbnQgdGFyZ2V0IGdyaWQgVUlEXG4gICAgICAgIF91aWQgPSB0aGlzLmdldENvbnRhaW5lck5vZGUoKS5jbGFzc05hbWUubWF0Y2goLyg/OiB8XilzbGlja2dyaWRfKFxcZCspKD8hXFx3KS8pWzFdO1xuXG4gICAgICAgIGxldCBzdHlsZUVsID0gX2NhY2hlW191aWRdLnN0eWxlRWw7XG4gICAgICAgIHN0eWxlRWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsKTtcbiAgICAgICAgb3JpZ2luYWxEZXN0cm95KCk7XG4gICAgICB9O1xuICAgIH0oZ3JpZC5kZXN0cm95KSk7XG5cbiAgICAvLyBubyBldmVudCBmaXJlZCB3aGVuIGBhdXRvc2l6ZUNvbHVtbnNgIGNhbGxlZCwgc28gZm9sbG93IGl0IGJ5IGFkdmljaW5nIGJlbG93IG1ldGhvZHMgd2l0aCBjb2x1bW4gZ3JvdXAgcmVzaXppbmcuXG4gICAgWydpbnZhbGlkYXRlJywgJ3JlbmRlciddLmZvckVhY2goZnVuY3Rpb24oZm5OYW1lKSB7XG4gICAgICBncmlkW2ZuTmFtZV0gPSAoZnVuY3Rpb24ob3JpZ0ZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBvcmlnRm4oYXJndW1lbnRzKTtcbiAgICAgICAgICBhcHBseUNvbHVtbkdyb3VwV2lkdGhzKCk7XG4gICAgICAgIH07XG4gICAgICB9KGdyaWRbZm5OYW1lXSkpO1xuICAgIH0pO1xuXG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBpbml0aWFsaXppbmcgYWR2aWNlc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgLy8gZGVwZW5kaW5nIG9uIGdyaWQgb3B0aW9uIGBleHBsaWNpdEluaXRpYWxpemF0aW9uYCwgY2hhbmdlIGEgdGltaW5nIG9mIGNvbHVtbiBncm91cCBjcmVhdGlvbi5cbiAgICBpZiAoZ3JpZC5nZXRPcHRpb25zKClbJ2V4cGxpY2l0SW5pdGlhbGl6YXRpb24nXSkge1xuICAgICAgLy8gZ3JpZCBhcmUgbm90IHlldCByZW5kZXJlZCwgc28gYWR2aWNlIGZvciBgZ3JpZC5pbml0YCB3aXRoIGNvbHVtbiBncm91cCBjcmVhdGlvbi5cbiAgICAgIGdyaWQuaW5pdCA9IChmdW5jdGlvbihvcmlnaW5hbEluaXQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIHVwZGF0ZSBjdXJyZW50IHRhcmdldCBncmlkIFVJRFxuICAgICAgICAgIF91aWQgPSB0aGlzLmdldENvbnRhaW5lck5vZGUoKS5jbGFzc05hbWUubWF0Y2goLyg/OiB8XilzbGlja2dyaWRfKFxcZCspKD8hXFx3KS8pWzFdO1xuXG4gICAgICAgICAgb3JpZ2luYWxJbml0KCk7XG5cbiAgICAgICAgICBtZWFzdXJlSENlbGxQYWRkaW5nQW5kQm9yZGVyID0gbWVtb2l6ZU1lYXN1cmVIQ2VsbFBhZGRpbmdBbmRCb3JkZXIoKTtcbiAgICAgICAgICBncmlkLnNldENvbHVtbnMob3JpZ2luYWxDb2x1bW5EZWYpO1xuICAgICAgICAgIGNyZWF0ZUNzc1J1bGVzKCk7XG4gICAgICAgICAgZCgnZ3JpZCBoYXMgYmVlbiBpbml0aWFsaXplZCB3aXRoIEVYUExJQ0lUIG1vZGUnKTtcbiAgICAgICAgfTtcbiAgICAgIH0oZ3JpZC5pbml0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lYXN1cmVIQ2VsbFBhZGRpbmdBbmRCb3JkZXIgPSBtZW1vaXplTWVhc3VyZUhDZWxsUGFkZGluZ0FuZEJvcmRlcigpO1xuICAgICAgZ3JpZC5zZXRDb2x1bW5zKG9yaWdpbmFsQ29sdW1uRGVmKTtcbiAgICAgIGNyZWF0ZUNzc1J1bGVzKCk7XG4gICAgICBkKCdncmlkIGhhcyBiZWVuIGluaXRpYWxpemVkIHdpdGggSU1QTElDSVQgbW9kZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBIEhhbmRsZXIgZm9yIG9uQ29sdW1uc1Jlc2l6ZWQgZXZlbnQuXG4gICAqL1xuICBmdW5jdGlvbiBoYW5kbGVDb2x1bW5zUmVzaXplZCgpIHtcbiAgICBkKCdoYW5kbGVDb2x1bW5zUmVzaXplZCcpO1xuXG4gICAgYXBwbHlDb2x1bW5Hcm91cFdpZHRocygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBob3Jpem9udGFsIHBhZGRpbmcgYW5kIGJvcmRlciBwaXhlbHMgb24gYSBjZWxsLlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFN1bSBvZiBob3Jpem9udGFsIHBhZGRpbmcgYW5kIGJvcmRlciBwaXhlbHMgb24gYSBjZWxsXG4gICAqL1xuICB2YXIgbWVhc3VyZUhDZWxsUGFkZGluZ0FuZEJvcmRlcjtcbiAgZnVuY3Rpb24gbWVtb2l6ZU1lYXN1cmVIQ2VsbFBhZGRpbmdBbmRCb3JkZXIoKSB7XG4gICAgZCgnZ2VuTWVhc3VyZUNlbGxIb3Jpem9udGFsUGFkZGluZ0FuZEJvcmRlcicpO1xuXG4gICAgbGV0IGhlYWRlckNvbHVtbldpZHRoRGlmZjtcblxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGQoJ21lYXN1cmVIQ2VsbFBhZGRpbmdBbmRCb3JkZXInKTtcblxuICAgICAgaWYgKGhlYWRlckNvbHVtbldpZHRoRGlmZiAhPSBudWxsKVxuICAgICAgICByZXR1cm4gaGVhZGVyQ29sdW1uV2lkdGhEaWZmO1xuXG4gICAgICBsZXQgaCA9IFsncGFkZGluZ0xlZnQnLCAncGFkZGluZ1JpZ2h0JywgJ2JvcmRlckxlZnRXaWR0aCcsICdib3JkZXJSaWdodFdpZHRoJ10sXG4gICAgICAgICAgJHIgPSAkKF9jYWNoZVtfdWlkXS5vcmlnSGVhZGVyc0VsKSxcbiAgICAgICAgICAkZWwgPSAkKCc8ZGl2IGNsYXNzPVwidWktc3RhdGUtZGVmYXVsdCBzbGljay1oZWFkZXItY29sdW1uXCIgaWQ9XCJcIiBzdHlsZT1cInZpc2liaWxpdHk6aGlkZGVuXCI+LTwvZGl2PicpLmFwcGVuZFRvKCRyKSxcbiAgICAgICAgICB3aWR0aERpZmYgPSAwO1xuXG4gICAgICBoLmZvckVhY2goZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHdpZHRoRGlmZiArPSAocGFyc2VGbG9hdCgkZWwuY3NzKHZhbCkpIHx8IDApO1xuICAgICAgfSk7XG4gICAgICAkZWwucmVtb3ZlKCk7XG4gICAgICBoZWFkZXJDb2x1bW5XaWR0aERpZmYgPSB3aWR0aERpZmY7XG5cbiAgICAgIHJldHVybiBoZWFkZXJDb2x1bW5XaWR0aERpZmY7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZWFzdXJlIGEgY2VsbCBoZWlnaHQgYW5kIGhvcml6b250YWwgcGFkZGluZy4gKGFsbW9zdCBhZGFwdGVkIGZyb20gYG1lYXN1cmVDZWxsUGFkZGluZ0FuZEJvcmRlcmAgaW4gc2xpY2suZ3JpZC5qcylcbiAgICogQHByaXZhdGVcbiAgICogQHJldHVybnMge09iamVjdH0gaGVpZ2h0LCBhbmQgYm9yZGVyIHBsdXMgcGFkZGluZ1xuICAgKi9cbiAgZnVuY3Rpb24gbWVhc3VyZVZDZWxsUGFkZGluZ0FuZEJvcmRlcigpIHtcblxuICAgIGxldCB2ID0gWydib3JkZXJUb3BXaWR0aCcsICdib3JkZXJCb3R0b21XaWR0aCcsICdwYWRkaW5nVG9wJywgJ3BhZGRpbmdCb3R0b20nXSxcbiAgICAgICAgJGNhbnZhcyA9ICQoX2NhY2hlW191aWRdLmdyaWQuZ2V0Q2FudmFzTm9kZSgpKSxcbiAgICAgICAgJHIgPSAkKCc8ZGl2IGNsYXNzPVwic2xpY2stcm93XCIgLz4nKS5hcHBlbmRUbygkY2FudmFzKSxcbiAgICAgICAgJGVsID0gJCgnPGRpdiBjbGFzcz1cInNsaWNrLWNlbGxcIiBpZD1cIlwiIHN0eWxlPVwidmlzaWJpbGl0eTpoaWRkZW5cIj4tPC9kaXY+JykuYXBwZW5kVG8oJHIpLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIGhlaWdodERpZmYgPSAwO1xuXG4gICAgaGVpZ2h0ID0gcGFyc2VGbG9hdCgkZWwuY3NzKCdoZWlnaHQnKSk7XG4gICAgdi5mb3JFYWNoKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgaGVpZ2h0RGlmZiArPSBwYXJzZUZsb2F0KCRlbC5jc3ModmFsKSkgfHwgMDtcbiAgICB9KTtcbiAgICAkci5yZW1vdmUoKTtcblxuICAgIHJldHVybiB7aGVpZ2h0LCBoZWlnaHREaWZmfTtcbiAgfSAvLyBfbWVhc3VyZVZDZWxsUGFkZGluZ0FuZEJvcmRlclxuXG4gIC8qKlxuICAgKiBBcHBseSBjb2x1bW4gZ3JvdXAgaGVhZGVyJ3Mgd2lkdGhzLlxuICAgKi9cbiAgZnVuY3Rpb24gYXBwbHlDb2x1bW5Hcm91cFdpZHRocygpIHtcbiAgICBkKCdhcHBseUNvbHVtbkdyb3VwV2lkdGhzJyk7XG5cbiAgICBsZXQgY2FjaGUgPSBfY2FjaGVbX3VpZF0sXG4gICAgICAgIG9yaWdIZWFkZXJzV2lkdGggPSBnZXRIZWFkZXJzV2lkdGgoKSxcbiAgICAgICAgZ3JvdXBIZWFkZXJzRWwgPSBjYWNoZS5ncm91cEhlYWRlcnNFbCxcbiAgICAgICAgbWF4TGV2ZWwgPSBncm91cEhlYWRlcnNFbC5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCByID0gMDsgciA8IG1heExldmVsOyByKyspIHtcbiAgICAgIGdyb3VwSGVhZGVyc0VsW3JdLnN0eWxlLndpZHRoID0gb3JpZ0hlYWRlcnNXaWR0aDtcbiAgICB9XG5cbiAgICBsZXQgaFBhZGRpbmcgPSBtZWFzdXJlSENlbGxQYWRkaW5nQW5kQm9yZGVyKCk7XG4gICAgc2V0V2lkdGhSZWN1cnNpdmVseShjYWNoZS5jb2x1bW5zRGVmKTtcbiAgICBmdW5jdGlvbiBzZXRXaWR0aFJlY3Vyc2l2ZWx5KGNvbHVtbnNEZWYsIGxldmVsID0gMCwgb2Zmc2V0c0J5TGV2ZWwgPSB7fSkge1xuICAgICAgZm9yIChsZXQgYyA9IDAsIEMgPSBjb2x1bW5zRGVmLmxlbmd0aDsgYyA8IEM7IGMrKykge1xuICAgICAgICBsZXQgY29sdW1uID0gY29sdW1uc0RlZltjXSxcbiAgICAgICAgICAgIGNvbHVtblNlbGVjdG9yID0gYCNzbGlja2dyaWRfJHsgX3VpZCArIFN0cmluZyhjb2x1bW4uaWQpLnJlcGxhY2UoLygjfCx8XFwuKS9nLCAnXFxcXCQxJykgfWAsXG4gICAgICAgICAgICBjb2x1bW5FbCA9IGNhY2hlLmhlYWRlclNjcm9sbGVyRWwucXVlcnlTZWxlY3Rvcihjb2x1bW5TZWxlY3Rvcik7XG5cbiAgICAgICAgaWYgKGhhc0NoaWxkcmVuKGNvbHVtbikpIHtcbiAgICAgICAgICBzZXRXaWR0aFJlY3Vyc2l2ZWx5KGNvbHVtbi5jaGlsZHJlbiwgbGV2ZWwgKyAxLCBvZmZzZXRzQnlMZXZlbCk7XG4gICAgICAgICAgbGV0IHdpZHRoID0gMDtcbiAgICAgICAgICBmb3IgKGxldCBjMiA9IDAsIEMyID0gY29sdW1uLmNoaWxkcmVuLmxlbmd0aDsgYzIgPCBDMjsgYzIrKykge1xuICAgICAgICAgICAgbGV0IGNvbHVtblNlbGVjdG9yID0gYCNzbGlja2dyaWRfJHsgX3VpZCArIFN0cmluZyhjb2x1bW4uY2hpbGRyZW5bYzJdLmlkKS5yZXBsYWNlKC8oI3wsfFxcLikvZywgJ1xcXFwkMScpIH1gLFxuICAgICAgICAgICAgICAgIGNvbHVtbkVsID0gY2FjaGUuaGVhZGVyU2Nyb2xsZXJFbC5xdWVyeVNlbGVjdG9yKGNvbHVtblNlbGVjdG9yKTtcbiAgICAgICAgICAgIHdpZHRoICs9IGNvbHVtbkVsLm9mZnNldFdpZHRoO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb2x1bW5FbC5zdHlsZS53aWR0aCA9IHdpZHRoIC0gaFBhZGRpbmcgKyAncHgnO1xuICAgICAgICAgIGNvbHVtbkVsLnN0eWxlLm1hcmdpbkxlZnQgPSAob2Zmc2V0c0J5TGV2ZWxbbGV2ZWxdIHx8IDApICsgJ3B4JztcbiAgICAgICAgICBvZmZzZXRzQnlMZXZlbFtsZXZlbF0gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAobGV0IGwgPSBsZXZlbDsgbCA8IG1heExldmVsOyBsKyspIHtcbiAgICAgICAgICAgIG9mZnNldHNCeUxldmVsW2xdID0gKG9mZnNldHNCeUxldmVsW2xdIHx8IDApICsgY29sdW1uRWwub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGQoY29sdW1uLmlkLCBsZXZlbCwgIG9mZnNldHNCeUxldmVsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfSAvLyBhcHBseUNvbHVtbkdyb3VwV2lkdGhzXG5cbiAgLyoqXG4gICAqIFJldHVybiBoZWFkZXJzIHdpZHRoXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IFN0cmluZyBmb3IgaGVhZGVycyB3aWR0aCBzdHlsZVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SGVhZGVyc1dpZHRoKCkge1xuICAgIGQoJ2dldEhlYWRlcnNXaWR0aCcpO1xuXG4gICAgcmV0dXJuIF9jYWNoZVtfdWlkXS5vcmlnSGVhZGVyc0VsLnN0eWxlLndpZHRoO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBjb2x1bW4gZ3JvdXAgaGVhZGVyIHJvdyBlbGVtZW50c1xuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ29sdW1uR3JvdXBIZWFkZXJSb3coKSB7XG4gICAgZCgnY3JlYXRlQ29sdW1uR3JvdXBIZWFkZXJSb3cnKTtcblxuICAgIGxldCBjYWNoZSA9IF9jYWNoZVtfdWlkXSxcbiAgICAgICAgaGVhZGVyU2Nyb2xsZXJFbCA9IGNhY2hlLmhlYWRlclNjcm9sbGVyRWwsXG4gICAgICAgIGdyb3VwSGVhZGVyc0VsID0gY2FjaGUuZ3JvdXBIZWFkZXJzRWwgPSBjYWNoZS5ncm91cEhlYWRlcnNFbCB8fCBbXSxcbiAgICAgICAgY29sdW1uc0RlZkJ5TGV2ZWwgPSBjYWNoZS5jb2x1bW5zRGVmQnlMZXZlbDtcblxuICAgIC8vIGRlc3Ryb3kgY3VycmVudHNcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gZ3JvdXBIZWFkZXJzRWwubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGhlYWRlclNjcm9sbGVyRWwucmVtb3ZlQ2hpbGQoY2FjaGUuZ3JvdXBIZWFkZXJzRWxbaV0pO1xuICAgIH1cblxuICAgIC8vIGNyZWF0ZSBhbmQgYXBwZW5kIG5ld2Vyc1xuICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY29sdW1uc0RlZkJ5TGV2ZWwubGVuZ3RoOyBpIDwgbGVuIC0gMTsgaSsrKSB7XG4gICAgICBsZXQgdG1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0bXAuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzbGljay1oZWFkZXItY29sdW1ucyBzbGljay1oZWFkZXItY29sdW1ucy1ncm91cHNcIiBzdHlsZT1cImxlZnQ6IC0xMDAwcHhcIiB1bnNlbGVjdGFibGU9XCJvblwiPjwvZGl2Pic7XG4gICAgICBkKCcgIGNyZWF0ZSBncm91cEhlYWRlcnNFbFslZF0nLCBpKTtcbiAgICAgIGdyb3VwSGVhZGVyc0VsW2ldID0gdG1wLmNoaWxkTm9kZXNbMF07XG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChncm91cEhlYWRlcnNFbFtpXSk7XG4gICAgfVxuICAgIGhlYWRlclNjcm9sbGVyRWwuaW5zZXJ0QmVmb3JlKGZyYWdtZW50LCBjYWNoZS5oZWFkZXJTY3JvbGxlckVsLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBjb2x1bW4gZ3JvdXAgaGVhZGVyIGVsZW1lbnRzXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVDb2x1bW5Hcm91cEhlYWRlcnMoKSB7XG4gICAgZCgnY3JlYXRlQ29sdW1uR3JvdXBIZWFkZXJzJyk7XG5cbiAgICBsZXQgY2FjaGUgPSBfY2FjaGVbX3VpZF0sXG4gICAgICAgIGNvbHVtbnNEZWZCeUxldmVsID0gY2FjaGUuY29sdW1uc0RlZkJ5TGV2ZWw7XG5cbiAgICBmb3IgKGxldCByID0gMCwgUiA9IGNhY2hlLmdyb3VwSGVhZGVyc0VsLmxlbmd0aDsgciA8IFI7IHIrKykge1xuICAgICAgbGV0IHRvQ3JlYXRlQ29sdW1uc0RlZiA9IGNvbHVtbnNEZWZCeUxldmVsW3JdLFxuICAgICAgICAgIGNvbHVtbnNHcm91cEh0bWwgPSAnJztcblxuICAgICAgZm9yIChsZXQgYyA9IDAsIEMgPSB0b0NyZWF0ZUNvbHVtbnNEZWYubGVuZ3RoOyBjIDwgQzsgYysrKSB7XG4gICAgICAgIGxldCBjb2x1bW4gPSB0b0NyZWF0ZUNvbHVtbnNEZWZbY107XG5cbiAgICAgICAgaWYgKGhhc0NoaWxkcmVuKGNvbHVtbikpIHtcbiAgICAgICAgICAvLyB0aGUgY29sdW1uIHdoaWNoIGhhdmUgY2hpbGRyZW4gaGFzIGEgcm9sZSBmb3Igc2hvd2luZyBjb2x1bW4gbmFtZVxuICAgICAgICAgIGNvbHVtbnNHcm91cEh0bWwgKz0gYFxuPGRpdiBjbGFzcz1cInVpLXN0YXRlLWRlZmF1bHQgc2xpY2staGVhZGVyLWNvbHVtbiBzbGljay1oZWFkZXItY29sdW1ucy1ncm91cCAkeyBjb2x1bW4uaGVhZGVyQ3NzQ2xhc3MgfHwgJycgfVwiXG4gIGlkPVwic2xpY2tncmlkXyR7IF91aWQgKyBjb2x1bW4uaWQgfVwiXG4gIHRpdGxlPVwiJHsgY29sdW1uLnRvb2xUaXAgfHwgJycgfVwiPlxuICA8c3BhbiBjbGFzcz1cInNsaWNrLWNvbHVtbi1uYW1lXCI+JHsgaGFzQ2hpbGRyZW4oY29sdW1uKSA/IChjb2x1bW4ubmFtZSB8fCAnJykgOiAnJyB9PC9zcGFuPlxuPC9kaXY+YDtcbiAgICAgICAgICBkKCcgIGNyZWF0ZSBhIFwiJXNcIiBjZWxsIGluIGdyb3VwSGVhZGVyc0VsWyVkXScsIGNvbHVtbi5pZCwgcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdGhlIGNvbHVtbiB3aGljaCBoYXZlIG5vIGNoaWxkcmVuIGlzIGEgdGlwIGNvbHVtblxuICAgICAgICAgIGxldCB0aXBDb2x1bW4gPSBjYWNoZS5vcmlnSGVhZGVyc0VsLnF1ZXJ5U2VsZWN0b3IoYCNzbGlja2dyaWRfJHsgX3VpZCArIFN0cmluZyhjb2x1bW4uaWQpLnJlcGxhY2UoLygjfCx8XFwuKS9nLCAnXFxcXCQxJykgfWApO1xuICAgICAgICAgIHRpcENvbHVtbi5jbGFzc05hbWUgKz0gJyBoJyArIChjb2x1bW5zRGVmQnlMZXZlbC5sZW5ndGggLSByKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FjaGUuZ3JvdXBIZWFkZXJzRWxbcl0uaW5uZXJIVE1MID0gY29sdW1uc0dyb3VwSHRtbDtcbiAgICB9XG5cbiAgICAvLyAvLyBmb3IgaG9yaXpvbnRhbCBzY3JvbGwgYmFyXG4gICAgY2FjaGUuZ3JpZC5yZXNpemVDYW52YXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgQ1NTIHJ1bGVzIGZvciBoZWFkZXIncyByb3dzcGFuIHN0eWxlLCB3aXRoXG4gICAqIGBzdHlsZWAgZWxlbWVudCB3aGljaCB3aWxsIGJlIGFwcGVuZGVkIHRvIGBoZWFkYCBlbGVtZW50LlxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ3NzUnVsZXMoKSB7XG4gICAgLy8gY3JlYXRlIHN0eWxlIHJ1bGVzXG4gICAgbGV0IGNhY2hlID0gX2NhY2hlW191aWRdLFxuICAgICAgICB2ID0gbWVhc3VyZVZDZWxsUGFkZGluZ0FuZEJvcmRlcigpLFxuICAgICAgICBydWxlcyA9IFsnLmhpZGRlbiB7dmlzaWJpbGl0eTogaGlkZGVuO30nXSxcbiAgICAgICAgbWF4TGV2ZWwgPSBjYWNoZS5jb2x1bW5zRGVmQnlMZXZlbC5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBtYXhMZXZlbDsgaSsrKSB7XG4gICAgICBydWxlcy5wdXNoKGBcbi5zbGljay1oZWFkZXItY29sdW1uLmgkeyBpIH0ge1xuICBtYXJnaW46ICR7ICgxIC0gaSkgKiAodi5oZWlnaHQgKyB2LmhlaWdodERpZmYpIH1weCAwIDAgMDtcbiAgZm9udC1zaXplOiBpbmhlcml0O1xuICBoZWlnaHQ6ICR7IGkgKiAodi5oZWlnaHQgKyB2LmhlaWdodERpZmYpIC0gdi5oZWlnaHREaWZmICogMiArIDEgfXB4O1xufWApO1xuICAgIH1cblxuICAgIGxldCBzdHlsZUVsID0gY2FjaGUuc3R5bGVFbCA9ICQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIiByZWw9XCJzdHlsZXNoZWV0XCIgLz4nKS5hcHBlbmRUbygkKCdoZWFkJykpWzBdO1xuICAgIGlmIChzdHlsZUVsLnN0eWxlU2hlZXQpIHsgLy8gSUVcbiAgICAgIHN0eWxlRWwuc3R5bGVTaGVldC5jc3NUZXh0ID0gcnVsZXMuam9pbignICcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZUVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGVzLmpvaW4oJyAnKSkpO1xuICAgIH1cbiAgfSAvLyBfY3JlYXRlQ3NzUnVsZXNcblxuICBmdW5jdGlvbiBnZW5Db2x1bW5zRGVmQnlMZXZlbChjb2x1bW5zLCBkZXB0aCA9IDAsIGFjYyA9IFtdKSB7XG4gICAgaWYgKGRlcHRoID09PSAwKSBkKCdnZW5Db2x1bW5zRGVmQnlMZXZlbCAocmVjdXJzaXZlKScpO1xuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGNvbHVtbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGxldCBjb2x1bW4gPSBjb2x1bW5zW2ldO1xuICAgICAgYWNjW2RlcHRoXSA9IGFjY1tkZXB0aF0gfHwgW107XG4gICAgICBhY2NbZGVwdGhdLnB1c2goY29sdW1uKTtcbiAgICAgIGlmIChoYXNDaGlsZHJlbihjb2x1bW4pKSB7XG4gICAgICAgIGdlbkNvbHVtbnNEZWZCeUxldmVsKGNvbHVtbi5jaGlsZHJlbiwgZGVwdGggKyAxLCBhY2MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZmxhdHRlbiBhcnJheSBvZiBjb2x1bW4gZGVmaW5hdGlvbnMgZm9yIG9yaWdpbmFsIGBTbGljay5HcmlkI3NldENvbHVtbmAsXG4gICAqIGZyb20gc3RydWN0dXJlZCBjb2x1bW4gZGVmaW5hdGlvbnMuXG4gICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IGNvbHVtbnMgc3RydWN0dXJlZCBjb2x1bW4gZGVmaW5hdGlvbnNcbiAgICogQHJldHVybnMge0FycmF5LjxPYmplY3Q+fSBBcnJheSBvZiBjb2x1bW4gZGVmaW5hdGlvbnNcbiAgICovXG4gIGZ1bmN0aW9uIGdlbklubmVyQ29sdW1uc0RlZihjb2x1bW5zLCBhY2MgPSBbXSwgZmlyc3QgPSB0cnVlKSB7XG4gICAgaWYgKGZpcnN0KSBkKCdnZW5Jbm5lckNvbHVtbnNEZWYgKHJlY3Vyc2l2ZSknKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBjb2x1bW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBsZXQgY29sdW1uID0gY29sdW1uc1tpXTtcbiAgICAgIGlmICghaGFzQ2hpbGRyZW4oY29sdW1uKSkge1xuICAgICAgICBhY2MucHVzaChjb2x1bW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VuSW5uZXJDb2x1bW5zRGVmKGNvbHVtbi5jaGlsZHJlbiwgYWNjLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGNvbHVtbiBoYXMgY2hpbGRyZW4uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb2x1bW4gZGVmaW5hdGlvblxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gaGFzIGNoaWxkcmVuIG9yIG5vdFxuICAgKi9cbiAgZnVuY3Rpb24gaGFzQ2hpbGRyZW4oY29sdW1uKSB7XG4gICAgcmV0dXJuIGNvbHVtbi5jaGlsZHJlbiAmJlxuICAgICAgY29sdW1uLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiZcbiAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoY29sdW1uLmNoaWxkcmVuKSA9PT0gJ1tvYmplY3QgQXJyYXldJyB8fFxuICAgICAgZmFsc2U7XG4gIH1cblxuICAkLmV4dGVuZCh0aGlzLCB7XG4gICAgaW5pdFxuICB9KTtcbn1cbiJdfQ==
